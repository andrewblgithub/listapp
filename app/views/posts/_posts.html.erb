<div class="panel panel-default">
    <div class="panel-body">
        <h4 class="text-center">
            <div class="countdown" data-countdown="<%= post.expires_at %>"></div>
        </h4>
        <hr>
        <div class="col-sm-6">
            <img class="img-responsive-posts" src="<%=post.image %>">
        </div>
        <div class="col-sm-6">
            <h4>
                <p style="opacity:.7; font-size: 80%;"><%= local_time(post.expires_at, "%m-%d-%Y %l:%M %p") %></p>
                <p>
                    <%= link_to post.content, [post.list, post] %>
                </p>
                <span style="opacity:.7; font-size: 70%;">
                    by <%= post.username %> <%= local_time_ago(post.created_at) %> in <%= post.list.name %>
                </span>
            </h4>
            <footer>
                <%= render 'posts/likes_comments', :post => post %>
            </footer>
        </div>
    </div>
</div>

<script type = "text/javascript">
    $('[data-countdown]').each(function() {
        var $this = $(this), finalDate = $(this).data('countdown');
        $this.countdown(finalDate, function(event) {
            $this.html(event.strftime('%-D:singular,plural; days %-H hours %-M minutes %-S seconds'));
        });
        $this.on('finish.countdown', function(event){
            $(this).text("Completed!");
        });
    });
</script>